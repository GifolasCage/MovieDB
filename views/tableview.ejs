<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <%- include('./partials/head.ejs') %>
    <style>
      .full-height {
        height: 100vh;
      }
    </style>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <%- include('./partials/navbar.ejs') %>
    <main class="container d-flex flex-column align-items-center flex-grow-1">
      <table class="table table-striped table-bordered m-3">
        <thead>
          <tr class="">
            <th scope="col">Title</th>
            <th scope="col">Year</th>
            <th scope="col">Plot</th>
            <th scope="col">Rating</th>
            <th scope="col">Poster</th>
            <th scope="col">Imdb</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
          <% data.sort((a, b) => { const titleA = a.title.toLowerCase(); const
          titleB = b.title.toLowerCase(); if (titleA < titleB) return -1; if
          (titleA > titleB) return 1; return 0; }).forEach(function(item) { %>
          <tr>
            <td><%= item.title %></td>
            <td><%= item.year %></td>
            <td><%= item.plot %></td>
            <td><%= item.rating %>/10</td>
            <td>
              <img src="<%= item.poster %>" alt="Movie Poster" width="100" />
            </td>
            <td>
              <a
                href="https://www.imdb.com/title/<%= item.imdbId %>"
                target="_blank"
                class="btn btn-primary"
                >Imdb</a
              >
            </td>
            <td>
              <button
                class="btn btn-danger"
                id="<%= item._id %>"
                onclick="deleteEntry(this.id, 'movie', '<%=item.title%>', 'table')"
              >
                Delete
              </button>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </main>
    <%- include('./partials/footer.ejs') %>
  </body>
</html>
